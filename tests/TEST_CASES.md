# EvoSkill 手动测试用例

## 测试环境信息

| 项目 | 内容 |
|------|------|
| 测试日期 | 2026-XX-XX |
| 操作系统 | Windows 11 |
| Python 版本 | 3.12.9 |
| EvoSkill 版本 | v0.1.0 |
| LLM Provider | kimi-coding |
| 模型 | k2p5 |

---

## 用例 1: 基础对话

### 1.1 简单问候
**前置条件**: 配置正确，API Key 有效

**测试步骤**:
1. 运行 `uv run evoskill chat`
2. 输入: `你好`
3. 等待回复

**预期结果**:
- [ ] 程序正常启动，显示欢迎信息
- [ ] AI 回复中文问候语
- [ ] 没有报错或异常退出

**实际结果**: _______________

---

### 1.2 编程问题
**前置条件**: 用例 1.1 通过

**测试步骤**:
1. 在同一会话中输入: `用 Python 写一个斐波那契数列函数`
2. 等待回复

**预期结果**:
- [ ] AI 生成正确的 Python 代码
- [ ] 代码包含函数定义和示例调用
- [ ] 没有格式错误

**实际结果**: _______________

---

### 1.3 多轮对话
**前置条件**: 用例 1.1 通过

**测试步骤**:
1. 输入: `请记住：我的名字叫张三`
2. 等待回复
3. 输入: `我刚才告诉你我叫什么名字？`
4. 等待回复

**预期结果**:
- [ ] AI 能记住"张三"这个名字
- [ ] 第二次回复包含"张三"

**实际结果**: _______________

---

## 用例 2: 文件操作工具

### 2.1 读取文件
**前置条件**: 项目根目录有 README.md 文件

**测试步骤**:
1. 启动对话
2. 输入: `请读取 README.md 文件的内容`
3. 观察输出

**预期结果**:
- [ ] 显示 `▶ 使用工具: read_file`
- [ ] 返回 README.md 的实际内容
- [ ] 内容完整，没有截断

**实际结果**: _______________

---

### 2.2 读取代码文件（带行号）
**前置条件**: 无

**测试步骤**:
1. 输入: `查看 evoskill/core/session.py 的前 30 行`
2. 等待回复

**预期结果**:
- [ ] 调用 view_code 或 read_file 工具
- [ ] 显示代码内容
- [ ] 有行号标注（如果是 view_code）

**实际结果**: _______________

---

### 2.3 列出目录
**前置条件**: 无

**测试步骤**:
1. 输入: `列出当前目录的文件`
2. 等待回复

**预期结果**:
- [ ] 调用 list_dir 工具
- [ ] 显示文件和目录列表
- [ ] 包含文件大小和修改时间（可选）

**实际结果**: _______________

---

## 用例 3: 代码搜索工具

### 3.1 搜索代码内容
**前置条件**: 无

**测试步骤**:
1. 输入: `搜索项目中所有包含 "class AgentSession" 的文件`
2. 等待回复

**预期结果**:
- [ ] 调用 search_files 工具
- [ ] 返回匹配的文件路径和行号
- [ ] 包含 evoskill/core/session.py

**实际结果**: _______________

---

### 3.2 按文件类型搜索
**前置条件**: 无

**测试步骤**:
1. 输入: `在所有 Python 文件中搜索 "def test_"`
2. 等待回复

**预期结果**:
- [ ] 只搜索 .py 文件
- [ ] 返回测试函数的位置

**实际结果**: _______________

---

## 用例 4: 代码编辑工具

### 4.1 创建新文件
**前置条件**: 无

**测试步骤**:
1. 输入: `创建一个 test_hello.py 文件，写入一个简单的 Hello World 程序`
2. 等待回复
3. 手动验证: `cat test_hello.py` 或打开文件查看

**预期结果**:
- [ ] 调用 write_file 工具
- [ ] 文件被创建
- [ ] 文件内容正确

**实际结果**: _______________

---

### 4.2 编辑现有文件
**前置条件**: 用例 4.1 通过

**测试步骤**:
1. 输入: `在 test_hello.py 中添加一个函数 greet(name)，返回 "Hello " + name`
2. 等待回复
3. 手动验证文件内容

**预期结果**:
- [ ] 调用 edit_code 或 write_file 工具
- [ ] 原有内容保留
- [ ] 新函数被添加

**实际结果**: _______________

---

### 4.3 替换代码
**前置条件**: 用例 4.1 通过

**测试步骤**:
1. 输入: `将 test_hello.py 中的 print("Hello World") 改为 print("Hello EvoSkill")`
2. 等待回复
3. 手动验证

**预期结果**:
- [ ] 精确替换目标字符串
- [ ] 其他内容不变

**实际结果**: _______________

**清理**: 测试完成后删除 test_hello.py

---

## 用例 5: 命令执行工具

### 5.1 执行安全命令
**前置条件**: require_confirmation: true

**测试步骤**:
1. 输入: `执行命令 "python --version"`
2. 观察是否询问确认
3. 输入 `y` 或 `yes` 确认
4. 等待结果

**预期结果**:
- [ ] 询问是否确认执行
- [ ] 执行后返回 Python 版本信息
- [ ] 显示命令输出

**实际结果**: _______________

---

### 5.2 取消危险命令
**前置条件**: require_confirmation: true

**测试步骤**:
1. 输入: `执行命令 "rm -rf ."`
2. 当询问确认时，输入 `n` 或 `no`
3. 观察结果

**预期结果**:
- [ ] 询问是否确认
- [ ] 取消后命令不执行
- [ ] 提示用户已取消

**实际结果**: _______________

---

## 用例 6: Skill 创建功能

### 6.1 创建简单 Skill
**前置条件**: 无

**测试步骤**:
1. 输入: `/create calculator`
2. AI 会询问用途，回答: `创建一个计算器，支持加减乘除运算`
3. 等待 Skill 生成完成
4. 检查 `.evoskill/skills/calculator/` 目录

**预期结果**:
- [ ] 生成 SKILL.md 文件
- [ ] 生成 main.py 文件
- [ ] SKILL.md 包含工具描述和参数说明
- [ ] main.py 包含 calculator 函数

**实际结果**: _______________

---

### 6.2 使用自定义 Skill
**前置条件**: 用例 6.1 通过

**测试步骤**:
1. 重启 EvoSkill（加载新 Skill）
2. 输入: `用 calculator 计算 123 + 456`
3. 等待回复

**预期结果**:
- [ ] 调用 calculator skill
- [ ] 返回结果 579

**实际结果**: _______________

---

## 用例 7: 内置命令

### 7.1 帮助命令
**前置条件**: 无

**测试步骤**:
1. 输入: `/help`

**预期结果**:
- [ ] 显示命令列表表格
- [ ] 包含 /exit, /skills, /clear, /create

**实际结果**: _______________

---

### 7.2 查看 Skills
**前置条件**: 用例 6.1 通过

**测试步骤**:
1. 输入: `/skills`

**预期结果**:
- [ ] 显示所有已加载 Skills
- [ ] 包含 builtin 和 calculator

**实际结果**: _______________

---

### 7.3 清空历史
**前置条件**: 进行过对话

**测试步骤**:
1. 输入: `/clear`
2. 输入: `我刚才说了什么？`

**预期结果**:
- [ ] /clear 执行成功
- [ ] AI 回答"这是对话的开始"或表示不记得

**实际结果**: _______________

---

### 7.4 退出程序
**前置条件**: 无

**测试步骤**:
1. 输入: `/exit`

**预期结果**:
- [ ] 程序正常退出
- [ ] 没有异常报错
- [ ] 回到命令行

**实际结果**: _______________

---

## 用例 8: 错误处理

### 8.1 无效命令
**前置条件**: 无

**测试步骤**:
1. 输入: `/invalid_command`

**预期结果**:
- [ ] 提示未知命令
- [ ] 程序不崩溃

**实际结果**: _______________

---

### 8.2 读取不存在的文件
**前置条件**: 无

**测试步骤**:
1. 输入: `读取 not_exist_file_12345.txt`

**预期结果**:
- [ ] 工具返回错误信息
- [ ] AI 告知用户文件不存在

**实际结果**: _______________

---

### 8.3 访问受限路径
**前置条件**: 无

**测试步骤**:
1. 输入: `读取 C:\Windows\System32\drivers\etc\hosts`（Windows）
   或 `读取 /etc/passwd`（Linux/Mac）

**预期结果**:
- [ ] 工具返回权限错误
- [ ] 或 AI 拒绝执行

**实际结果**: _______________

---

## 用例 9: 网络功能

### 9.1 获取网页内容
**前置条件**: 网络连接正常

**测试步骤**:
1. 输入: `获取 https://www.example.com 的内容`
2. 等待回复

**预期结果**:
- [ ] 调用 fetch_url 工具
- [ ] 返回网页 HTML 内容（或主要内容）

**实际结果**: _______________

---

### 9.2 访问无效 URL
**前置条件**: 无

**测试步骤**:
1. 输入: `获取 https://this-domain-does-not-exist-12345.com`

**预期结果**:
- [ ] 工具返回网络错误
- [ ] AI 告知无法访问

**实际结果**: _______________

---

## 用例 10: 配置切换

### 10.1 切换到不同 Provider
**前置条件**: 有其他 Provider 的 API Key

**测试步骤**:
1. 编辑配置文件，改为 openai provider
2. 重启 EvoSkill
3. 输入: `你好`

**预期结果**:
- [ ] 程序使用新的 provider
- [ ] 对话正常进行

**实际结果**: _______________

---

## 测试结果汇总

| 类别 | 用例数 | 通过 | 失败 | 通过率 |
|------|--------|------|------|--------|
| 基础对话 | 3 | | | |
| 文件操作 | 3 | | | |
| 代码搜索 | 2 | | | |
| 代码编辑 | 3 | | | |
| 命令执行 | 2 | | | |
| Skill 系统 | 2 | | | |
| 内置命令 | 4 | | | |
| 错误处理 | 3 | | | |
| 网络功能 | 2 | | | |
| 配置切换 | 1 | | | |
| **总计** | **25** | | | |

---

## 发现的问题

1. 问题描述: _______________
   - 严重程度: 高/中/低
   - 复现步骤: _______________

2. 问题描述: _______________
   - 严重程度: 高/中/低
   - 复现步骤: _______________

---

## 改进建议

1. _______________
2. _______________
3. _______________

---

**测试人员签名**: _______________

**测试完成时间**: _______________
